@using MetaFrm.Control
@using MetaFrm.Razor.Essentials
@using MetaFrm.Razor.Models
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components.Web
@inherits BaseComponent

<TitleControl Title="Profile"></TitleControl>

<CardControl TItem="ProfileModel" SelectItem="this.ProfileViewModel.ProfileModel" SelectItemKeyProperty="@(nameof(this.ProfileViewModel.ProfileModel.USER_ID))"
             HeaderText="Profile" CssClass="card bg-dark">
    <Text>
        <EditForm class="container" Model="@this.ProfileViewModel.ProfileModel" OnValidSubmit="this.Save">
            <DataAnnotationsValidator />

            <div class="row pb-2">
                <FieldControl Label="" IsColon="false">
                    <Control>
                        <img class="figure-img rounded-pill float-start" width="140" height="140" alt="JPG/PNG Image User" src="@this.ProfileViewModel.ProfileModel.PROFILE_IMAGE" />
                        <InputFile class="form-control" placeholder="JPG/PNG File" accept="image/png, image/jpeg, image/gif" OnChange="this.InputFileChangeEventArgs" />
                    </Control>
                </FieldControl>
            </div>

            <div class="row">
                <FieldControl Label="Email address" Value="this.ProfileViewModel.ProfileModel.EMAIL"></FieldControl>
                <FieldControl Label="Nickname">
                    <Control>
                        <InputText id="nickname" class="form-control" placeholder="* Nickname" @bind-Value="this.ProfileViewModel.ProfileModel.NICKNAME" />
                        <ValidationMessage For="@(()=>this.ProfileViewModel.ProfileModel.NICKNAME)" />
                    </Control>
                </FieldControl>
            </div>
            <div class="row">
                <FieldControl Label="Full name">
                    <Control>
                        <InputText id="fullname" class="form-control" placeholder="* Full name" @bind-Value="this.ProfileViewModel.ProfileModel.FULLNAME" />
                        <ValidationMessage For="@(()=>this.ProfileViewModel.ProfileModel.FULLNAME)" />
                    </Control>
                </FieldControl>
                <FieldControl Label="Phone Number">
                    <Control>
                        <InputText id="phonenumber" class="form-control" placeholder="* Phone Number" @bind-Value="this.ProfileViewModel.ProfileModel.PHONENUMBER" />
                        <ValidationMessage For="@(()=>this.ProfileViewModel.ProfileModel.PHONENUMBER)" />
                    </Control>
                </FieldControl>
            </div>
            <div class="row">
                <FieldControl Label="Inactive Date" Value="@($"{this.ProfileViewModel.ProfileModel.INACTIVE_DATE:yyyy-MM-dd HH:mm}")"></FieldControl>
            </div>

            <CommandControl TItem="ProfileModel" SelectItem="this.ProfileViewModel.ProfileModel" SelectItemKeyProperty="@(nameof(this.ProfileViewModel.ProfileModel.USER_ID))" SaveIsSubmit="true" />
        </EditForm>
    </Text>
</CardControl>